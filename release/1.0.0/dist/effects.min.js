/*
Copyright (c) Daybrush
name: @scenejs/effects
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/scenejs-effects.git
version: 1.0.0
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("scenejs")):"function"==typeof define&&define.amd?define(["exports","scenejs"],t):t((e=e||self).Scene=e.Scene||{},e.Scene)}(this,function(e,S){"use strict";function y(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2];return{prefix:r,unit:t[3],value:parseFloat(n)}}function a(e){return[].slice.call(e)}var c=CSSRule.KEYFRAMES_RULE||CSSRule.WEBKIT_KEYFRAMES_RULE,u=CSSRule.KEYFRAME_RULE||CSSRule.WEBKIT_KEYFRAME_RULE;function f(e,t,r){for(var n=new S.SceneItem({},r),o=t.length,i=0;i<o;++i)n.set(i/(o-1)*100+"%",e,t[i]);return n}function s(e){var t,r=void 0===e?{}:e,n=r.x,o=void 0===n?1:n,i=r.y,a=void 0===i?1:i,c=r.backside,u=void 0!==c&&c,f=new S.SceneItem({},e),s="",v="",d="",p=o&&a||o?o:a,l=u?0<p?180:-180:0,y=l+180*p;if(o&&a){var m=[0<o?1:-1,0<a?1:-1,0,""].join(",");s="rotate3d",v=m+l+"deg",d=m+y+"deg"}else{if(o)s="rotateX";else{if(!a)return f;s="rotateY"}v=l+"deg",d=y+"deg"}return f.set({transform:(t={},t[s]=[v,d],t)}),f}function v(e){var t=void 0===e?{}:e,r=t.properties,n=void 0===r?{transform:{translateX:["-10px","10px"],translateY:["-10px","10px"],rotate:["-10deg","10deg"]}}:r,o=t.frequency,d=void 0===o?10:o,p=new S.SceneItem({},e),l=new S.Frame(n);return l.getNames().forEach(function(e,t){var r=l.get.apply(l,e),n=0,o=0,i="";if(function(e){return Array.isArray(e)}(r)){var a=y(r[0]),c=a.value;i=a.unit,n=c,o=y(r[1]).value}else{var u=y(r),f=u.value;i=u.unit,n=-(o=Math.abs(f))}p.set.apply(p,["0%"].concat(e,[""+(n+o)/2+i])),p.set.apply(p,["100%"].concat(e,[""+(n+o)/2+i]));for(var s=1;s<=d;++s){var v=Math.random()*(o-n)+n;p.set.apply(p,[s/(d+1)*100+"%"].concat(e,[""+v+i]))}}),p}e.blink=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to;return f("opacity",[n,void 0===o?1:o,n],e)},e.fadeIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to;return f("opacity",[n,void 0===o?1:o],e)},e.fadeOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?1:r,o=t.to;return f("opacity",[n,void 0===o?0:o],e)},e.flip=s,e.flipX=function(e){var t=void 0===e?{}:e,r=t.x,n=void 0===r?1:r,o=t.backside,i=s({y:0,x:n,backside:void 0!==o&&o});return i.setOptions(e),i},e.flipY=function(e){var t=void 0===e?{}:e,r=t.y,n=void 0===r?1:r,o=t.backside,i=s({x:0,y:n,backside:void 0!==o&&o});return i.setOptions(e),i},e.keyframer=function(e,t){return new S.SceneItem(function(o){for(var i=a(document.styleSheets).filter(function(e){try{return 0<e.cssRules.length}catch(e){return!1}}),e=i.length,t=function(e){var t=a(i[e].cssRules).filter(function(e){return e.name===o&&e.type===c})[0];if(t){var r=a(t.cssRules),n={};return r.forEach(function(e){if(e.type===u){var t=e.keyText,r=e.style.cssText;(function(e){var t=e.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return t?t.map(function(e){return e.trim()}):[]})(t).forEach(function(e){n[e]=r})}}),{value:n}}},r=0;r<e;++r){var n=t(r);if("object"==typeof n)return n.value}return{}}(e),t)},e.kineticFrame=function(e){var t=void 0===e?{}:e,r=t.leftProperty,n=void 0===r?["transform","translateX"]:r,o=t.topProperty,i=void 0===o?["transform","translateY"]:o,a=t.left,c=void 0===a?"0px":a,u=t.top,f=void 0===u?"0px":u,s=new S.Frame;return s.set.apply(s,[].concat(n).concat([c])),s.set.apply(s,[].concat(i).concat([f])),s.set("transform-origin","calc(50% - "+c+") calc(50% - "+f+")"),s},e.shake=v,e.shakeX=function(e){var t=void 0===e?{}:e,r=t.x,n=void 0===r?["-5px","5px"]:r,o=t.frequency,i=v({properties:{transform:{translateX:n}},frequency:void 0===o?10:o});return i.setOptions(e),i},e.shakeY=function(e){var t=void 0===e?{}:e,r=t.y,n=void 0===r?["-5px","5px"]:r,o=t.frequency,i=v({properties:{transform:{translateY:n}},frequency:void 0===o?10:o});return i.setOptions(e),i},e.transition=function(e,t,r){var n,o=new S.SceneItem;o.append(r);var i=o.getDuration(),a=Math.max(e.getDuration()-i,0);e.set(((n={})[a]=o,n)),o.setDirection("reverse"),t.set({0:o})},e.typing=function(e){var t=void 0===e?{}:e,r=t.property,n=void 0===r?["html"]:r,o=t.text,i=void 0===o?"":o,a=t.start,c=void 0===a?0:a,u=t.end,f=void 0===u?i.length:u,s=t.prefix,v=void 0===s?"":s,d=t.suffix,p=void 0===d?"":d,l=[].concat(n),y=new S.SceneItem,m=Math.abs(f-c)+1;if(c<f)for(var x=c;x<=f;++x)y.set.apply(y,[(x-c)/m*100+"%"].concat(l,[""+v+i.substring(c,x)+p]));else for(x=f;x<=c;++x)y.set.apply(y,[(x-f)/m*100+"%"].concat(l,[v+"text.substring(end, start + end - i)"+p]));return y.setOptions(e),y},e.wipeIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?"-100%":r,o=t.to,i=void 0===o?"0%":o,a=t.property;return f(void 0===a?"left":a,[n,i],e)},e.wipeOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?"0%":r,o=t.to,i=void 0===o?"100%":o,a=t.property;return f(void 0===a?"left":a,[n,i],e)},e.zoomIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to;return f(["transform","scale"],[n,void 0===o?1:o],e)},e.zoomOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?1:r,o=t.to;return f(["transform","scale"],[n,void 0===o?0:o],e)}});
//# sourceMappingURL=effects.min.js.map
