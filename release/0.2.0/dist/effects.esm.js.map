{"version":3,"file":"effects.esm.js","sources":["../src/effects.ts"],"sourcesContent":["import { SceneItem, AnimatorState, Frame } from \"scenejs\";\nimport { IObject, isArray, splitUnit } from \"@daybrush/utils\";\nimport { EffectState } from \"./types\";\n\n/**\n * @namespace effects\n */\n\n/**\n * Use the property to create an effect.\n * @memberof effects\n * @private\n * @param - property to set effect\n * @param - values of 100%\n * @example\n// import {set, blink} from \"@scenejs/effects\";\n// Scene.set(\"opacity\", [0, 1, 0], {duration: 2});\nset(\"opacity\", [0, 1, 0], {duration: 2});\n\n// Same\n// Scene.blink({duration: 2});\nblink({ duration: 2});\n\n// Same\nnew SceneItem({\n\t\"0%\": {\n\t\topacity: 0,\n\t},\n\t\"50%\": {\n\t\topacity: 1,\n\t}\n\t\"100%\": {\n\t\topacity: 0,\n\t}\n}, {\n\tduration: 2,\n});\n */\nfunction set(property: string | string[], values: any[], options: Partial<AnimatorState>): SceneItem {\n    const item = new SceneItem({}, options);\n    const length = values.length;\n\n    for (let i = 0; i < length; ++i) {\n        item.set(`${i / (length - 1) * 100}%`, property, values[i]);\n    }\n    return item;\n}\n\n/**\n * Make a zoom in effect.\n * @memberof effects\n * @param options\n * @param {number} [options.from = 0] start zoom\n * @param {number}[options.to = 1] end zoom\n * @param {number} options.duration animation's duration\n * @example\nimport { zoomIn } from \"@scenejs/effects\";\n\n// Scene.zoomIn({duration: 2});\nzoomIn({duration: 2});\n\n// Same\nnew SceneItem({\n\t\"0%\": {\n\t\t\"transform\": \"scale(0)\",\n\t},\n\t\"100%\": {\n\t\t\"transform\": \"scale(1)\",\n\t}\n}, {\n\tduration: 2,\n});\n */\nexport function zoomIn({ from = 0, to = 1 }: Partial<EffectState> = {}): SceneItem {\n    return set([\"transform\", \"scale\"], [from, to], arguments[0]);\n}\n\n/**\n * Make a zoom out effect.\n * @memberof effects\n * @param options\n * @param {number} [options.from = 1] start zoom\n * @param {number}[options.to = 0] end zoom\n * @param {number} options.duration animation's duration\n * @example\nimport { zoomOut } from \"@scenejs/effects\";\n// Scene.zoomOut({ duration: 2 });\nzoomOut({ duration: 2 });\n\n// Same\nnew SceneItem({\n\t\"0%\": {\n\t\t\"transform\": \"scale(1)\",\n\t},\n\t\"100%\": {\n\t\t\"transform\": \"scale(0)\",\n\t}\n}, {\n\tduration: 2,\n});\n */\nexport function zoomOut({ from = 1, to = 0 }: Partial<EffectState> = {}): SceneItem {\n    return set([\"transform\", \"scale\"], [from, to], arguments[0]);\n}\n\n/**\n * Make a wipe in effect.\n * @memberof effects\n * @param options\n * @param {string|string[]} [options.property = \"left\"] position property\n * @param {number|string} [options.from = \"-100%\"] start position\n * @param {number|string}[options.to = \"0%\"] end position\n * @param {number} options.duration animation's duration\n * @example\nimport { wipeIn } from \"@scenejs/effects\";\n\n// Scene.wipeIn({ property: \"left\", duration: 2 });\nwipeIn({ property: \"left\", duration: 2 });\n// Same\nnew SceneItem({\n\t\"0%\": {\n\t\t\"left\": \"-100%\",\n\t},\n\t\"100%\": {\n\t\t\"left\": \"0%\",\n\t}\n}, {\n\tduration: 2,\n});\n */\nexport function wipeIn({ from = \"-100%\", to = \"0%\", property = \"left\" }: Partial<EffectState> = {}): SceneItem {\n    return set(property, [from, to], arguments[0]);\n}\n\n/**\n * Make a wipe out effect.\n * @memberof effects\n * @param options\n * @param {string|string[]} [options.property = \"left\"] position property\n * @param {number|string} [options.from = \"0%\"] start position\n * @param {number|string}[options.to = \"100%\"] end position\n * @param {number} options.duration animation's duration\n * @example\nimport { wipeOut } from \"@scenejs/effects\";\n// Scene.wipeOut({property: \"left\", duration: 2});\nwipeOut({property: \"left\", duration: 2});\n// Same\nnew SceneItem({\n\t\"0%\": {\n\t\t\"left\": \"0%\",\n\t},\n\t\"100%\": {\n\t\t\"left\": \"100%\",\n\t}\n}, {\n\tduration: 2,\n});\n */\nexport function wipeOut({ from = \"0%\", to = \"100%\", property = \"left\" }: Partial<EffectState> = {}): SceneItem {\n    return set(property, [from, to], arguments[0]);\n}\n\n/**\n * Switch the scene from `item1` to `item2`.\n * @memberof effects\n * @param - Item that end effect\n * @param - Item that start effect\n * @param -  `transitionItem` or `transitionObject` to switch from `item1` to `item2`\n * @example\nimport Scene from \"scenejs\";\nimport {transition, zoomIn, fadeOut} from \"@scenejs/effects\";\n\nvar transitionScene = new Scene({\n  \"[data-transition] .target\": {},\n  \"[data-transition] .target2\": {},\n}, {\n  delay: 0.1,\n  easing: \"ease-in-out\",\n  selector: true,\n});\nScene.transition(\n  transitionScene.getItem(\"[data-transition] .target\"),\n  transitionScene.getItem(\"[data-transition] .target2\"),\n  {\n    0:  [\n      fadeOut({ duration: 1 }),\n      zoomIn({ from: 1, to: 2, duration: 1 }),\n      \"opacity: 1; transform: rotate(0deg)\",\n    ],\n    1: \"opacity: 0; transform: rotate(40deg)\",\n  }\n);\ntransitionScene.play();\n */\nexport function transition(\n    item1: SceneItem,\n    item2: SceneItem,\n    transitionObject: SceneItem | IObject<any>,\n): void {\n    const transitionItem = new SceneItem();\n\n    transitionItem.append(transitionObject);\n\n    const duration = transitionItem.getDuration();\n    const transitionTime = Math.max(item1.getDuration() - duration, 0);\n    item1.set({\n        [transitionTime]: transitionItem,\n    });\n    transitionItem.setDirection(\"reverse\");\n    item2.set({\n        0: transitionItem,\n    });\n}\n\n/**\n * Make a fade in effect.\n * @memberof effects\n * @param options\n * @param {number} [options.from = 0] start opacity\n * @param {number}[options.to = 1] end opacity\n * @param {number} options.duration animation's duration\n * @example\nimport { fadeIn } from \"@scenejs/effects\";\n// Scene.fadeIn({duration: 2});\nfadeIn({duration: 2});\n// Same\nnew SceneItem({\n\t\"0%\": {\n\t\topacity: 0,\n\t},\n\t\"100%\": {\n\t\topacity: 1,\n\t}\n}, {\n\tduration: 2,\n});\n */\nexport function fadeIn({ from = 0, to = 1 }: Partial<EffectState> = {}): SceneItem {\n    return set(\"opacity\", [from, to], arguments[0]);\n}\n\n/**\n * Make a fade out effect.\n * @memberof effects\n * @param options\n * @param {number} [options.from = 1] start opacity\n * @param {number}[options.to = 0] end opacity\n * @param {number} options.duration animation's duration\n * @example\nimport { fadeOut } from \"@scenejs/effects\";\n// Scene.fadeOut({duration: 2});\nfadeOut({duration: 2});\n// Same\nnew SceneItem({\n\t\"0%\": {\n\t\topacity: 1,\n\t},\n\t\"100%\": {\n\t\topacity: 0,\n\t}\n}, {\n\tduration: 2,\n});\n */\nexport function fadeOut({ from = 1, to = 0 }: Partial<EffectState> = {}): SceneItem {\n    return set(\"opacity\", [from, to], arguments[0]);\n}\n/**\n * Make a blinking effect.\n * @memberof effects\n * @param options\n * @param {number} [options.from = 0] start opacity\n * @param {number}[options.to = 1] end opacity\n * @param {number} options.duration animation's duration\n * @example\nimport {blink} from \"@scenejs/effects\";\n// Scene.blink({duration: 2});\nblink({duration: 2});\n// Same\nnew SceneItem({\n\t\"0%\": {\n\t\topacity: 0,\n\t},\n\t\"50%\": {\n\t\topacity: 1,\n\t},\n\t\"100%\": {\n\t\topacity: 0,\n\t}\n}, {\n\tduration: 2,\n});\n */\nexport function blink({ from = 0, to = 1 }: Partial<EffectState> = {}): SceneItem {\n    return set(\"opacity\", [from, to, from], arguments[0]);\n}\n/**\n * You can create a flip effect horizontally, vertically, or diagonally.\n * @memberof effects\n * @param options\n * @param {number} [options.x=1] - Indicates the direction and amount to be moved by the x-axis.\n * @param {number} [options.y=1] - Indicates the direction and amount to be moved by the y-axis.\n * @param {boolean} [options.backside=false] - Indicates whether to start from the back.\n * @example\nimport { flip } from \"@scenejs/effects\";\n\n// flip({ x: 1, y: 1, backside: false })\nflip()\n  .setDuration(1)\n  .setSelector(\"[data-flip] .target\")\n  .play();\nflip({ backside: true })\n  .setDuration(1)\n  .setSelector(\"[data-flip] .target2\")\n  .play();\n */\nexport function flip({\n    x = 1,\n    y = 1,\n    backside = false,\n}: Partial<EffectState> = {}) {\n    const item = new SceneItem({}, arguments[0]);\n    let property = \"\";\n    let startValue = \"\";\n    let endValue = \"\";\n    const ratio = (x && y) || x ? x : y;\n    const startDeg = (backside ? (ratio > 0 ? 180 : -180) : 0);\n    const endDeg = startDeg + ratio * 180;\n\n    if (x && y) {\n        const axis = [x > 0 ? 1 : -1, y > 0 ? 1 : -1, 0, \"\"].join(\",\");\n\n        property = \"rotate3d\";\n        startValue = axis + startDeg + \"deg\";\n        endValue = axis + endDeg + \"deg\";\n    } else {\n        if (x) {\n            property = \"rotateX\";\n        } else if (y) {\n            property = \"rotateY\";\n        } else {\n            return item;\n        }\n        startValue = startDeg + \"deg\";\n        endValue = endDeg + \"deg\";\n    }\n    item.set({\n        transform: {\n            [property]: [startValue, endValue],\n        },\n    });\n    return item;\n}\n/**\n * You can create an effect that flips vertically around the x-axis.\n * @memberof effects\n * @param options\n * @param {number} [options.x=1] - Indicates the direction and amount of movement.\n * @param {boolean} [options.backside=false] - Indicates whether to start from the back.\n * @example\nimport { flip, flipX } from \"@scenejs/effects\";\n\n// flip({ x: 1, y: 0, backside: false })\n// flipX({ x: 1, backside: false })\nflipX()\n  .setDuration(1)\n  .setSelector(\"[data-flipx] .target\")\n  .play();\nflipX({ backside: true })\n  .setDuration(1)\n  .setSelector(\"[data-flipx] .target2\")\n  .play();\n */\nexport function flipX({\n    x = 1,\n    backside = false,\n}: Partial<EffectState> = {}): SceneItem {\n    const item = flip({ y: 0, x, backside });\n\n    item.setOptions(arguments[0]);\n\n    return item;\n}\n/**\n * You can create an effect that flips horizontally around the y-axis.\n * @memberof effects\n * @param options\n * @param {number} [options.y=1] - Indicates the direction and amount of movement.\n * @param {boolean} [options.backside=false] - Indicates whether to start from the back.\n * @example\nimport { flip, flipY } from \"@scenejs/effects\";\n\n// flip({ x: 0, y: 1, backside: false })\n// flipY({ y: 1, backside: false })\nflipY()\n  .setDuration(1)\n  .setSelector(\"[data-flipy] .target\")\n  .play();\nflipY({ backside: true })\n  .setDuration(1)\n  .setSelector(\"[data-flipy] .target2\")\n  .play();\n */\nexport function flipY({\n    y = 1,\n    backside = false,\n}: Partial<EffectState> = {}): SceneItem {\n    const item = flip({ x: 0, y, backside });\n\n    item.setOptions(arguments[0]);\n    return item;\n}\n\n/**\n * Make a shake effect.\n * @memberof effects\n * @param options\n * @param {object|string} [options.properties=\"transform: translateX(5px) translateY (5px) rotate(5deg)\"] - The range of properties to be moved.\n * @param {number} [options.frequency=10] - frequency of shakes\n * @example\nimport { shake } from \"@scenejs/effects\";\n\nshake()\n  .setDuration(0.2)\n  .setIterationCount(\"infinite\")\n  .setSelector(\"[data-shake] .target\")\n  .play();\n\nshake({\n    properties: {\n      transform: {\n        // translateX: [\"-5px\", \"5px\"]\n        translateX: \"5px\",\n        translateY: [\"-5px\", \"5px\"],\n        rotate: \"5deg\",\n        // set range\n        scale: [0.8, 1],\n      },\n    },\n    frequency: 10,\n  })\n  .setDuration(0.2)\n  .setIterationCount(\"infinite\")\n  .setSelector(\"[data-shake] .target2\")\n  .play();\n */\nexport function shake({\n    properties = {\n        transform: {\n            translateX: [`-10px`, `10px`],\n            translateY: [`-10px`, `10px`],\n            rotate: [`-10deg`, `10deg`],\n        },\n    },\n    frequency = 10,\n}: Partial<EffectState> = {}): SceneItem {\n    const item = new SceneItem({}, arguments[0]);\n    const frame = new Frame(properties);\n    const names = frame.getNames();\n\n    names.forEach((propertyNames, i) => {\n        const value = frame.get(...propertyNames);\n        let start: number = 0;\n        let end: number = 0;\n        let unit: string = \"\";\n\n        if (isArray(value)) {\n            const { value: startNumber, unit: startUnit } = splitUnit(value[0]);\n\n            unit = startUnit;\n            start = startNumber;\n            end = splitUnit(value[1]).value;\n        } else {\n            const { value: valueNumber, unit: valueUnit } = splitUnit(value);\n\n            unit = valueUnit;\n            end = Math.abs(valueNumber);\n            start = -end;\n        }\n        item.set(`0%`, ...propertyNames, `${(start + end) / 2}${unit}`);\n        item.set(`100%`, ...propertyNames, `${(start + end) / 2}${unit}`);\n\n        for (let j = 1; j <= frequency; ++j) {\n            const ratio = Math.random() * (end - start) + start;\n            item.set(`${j / (frequency + 1) * 100}%`, ...propertyNames, `${ratio}${unit}`);\n        }\n    });\n    return item;\n}\n\n/**\n * Make a horizontal shake effect.\n * @memberof effects\n * @param options\n * @param {string|string[]} [options.x=[\"-5px\", \"5px\"]] - range of x's movement\n * @param {number} [options.frequency=10] - frequency of shakes\n * @example\nimport { shake, shakeX } from \"@scenejs/effects\";\n\n// shakeX({ x: [\"-5px\", \"5px\"], frequency: 10 })\nshakeX()\n  .setDuration(0.2)\n  .setIterationCount(\"infinite\")\n  .setSelector(\"[data-shakex] .target\")\n  .play();\n\nshake({\n    properties: {\n      transform: {\n        // translateX: [\"-5px\", \"5px\"]\n        translateX: \"5px\",\n      },\n    },\n    frequency: 10,\n  })\n  .setDuration(0.2)\n  .setIterationCount(\"infinite\")\n  .setSelector(\"[data-shakex] .target2\")\n  .play();\n */\nexport function shakeX({\n    x = [\"-5px\", \"5px\"],\n    frequency = 10,\n}: Partial<EffectState> = {}) {\n    const item = shake({\n        properties: {\n            transform: {\n                translateX: x,\n            },\n        },\n        frequency,\n    });\n    item.setOptions(arguments[0]);\n\n    return item;\n}\n/**\n * Make a vertical shake effect.\n * @memberof effects\n * @param options\n * @param {string|string[]} [options.y=[\"-5px\", \"5px\"]] - range of y's movement\n * @param {number} [options.frequency=10] - frequency of shakes\n * @example\nimport { shake, shakeY } from \"@scenejs/effects\";\n\n// shakeY({ y: [\"-5px\", \"5px\"], frequency: 10 })\nshakeY()\n  .setDuration(0.2)\n  .setIterationCount(\"infinite\")\n  .setSelector(\"[data-shakey] .target\")\n  .play();\n\nshake({\n    properties: {\n      transform: {\n        // translateY: [\"-5px\", \"5px\"]\n        translateY: \"5px\",\n      },\n    },\n    frequency: 10,\n  })\n  .setDuration(0.2)\n  .setIterationCount(\"infinite\")\n  .setSelector(\"[data-shakey] .target2\")\n  .play();\n */\nexport function shakeY({\n    y = [\"-5px\", \"5px\"],\n    frequency = 10,\n}: Partial<EffectState> = {}) {\n    const item = shake({\n        properties: {\n            transform: {\n                translateY: y,\n            },\n        },\n        frequency,\n    });\n    item.setOptions(arguments[0]);\n\n    return item;\n}\n\n/**\n * Make a typing effect that is typed one character at a time like a typewriter.\n * The `html` property only works with javascript animations.\n * The `content` property of CSS animations works only on desktop Chrome.\n * @memberof effects\n * @param options\n * @param {string|string[]} [options.property=[\"html\"]] - Property to apply the typing animation\n * @param {string} [options.text=\"\"] - Text to type\n * @param {number} [options.start=0] - Index to start typing\n * @param {number} [options.end=0] - Index to end typing\n * @example\nimport { typing } from \"@scenejs/effects\";\n\ntyping({ text: \"Make a typing effect with Scene.js.\"})\n  .setDuration(7)\n  .setSelector(\".target\")\n  .play();\n */\nexport function typing({\n    property = [\"html\"],\n    text= \"\",\n    start = 0,\n    end = text.length,\n}: Partial<EffectState> = {}) {\n    const properties = [].concat(property);\n    const item = new SceneItem();\n    const length = Math.abs(end - start);\n\n    if (start < end) {\n        for (let i = start; i < end; ++i) {\n            item.set(`${i / length * 100}%`, ...properties, text.substring(start, i));\n        }\n    } else {\n        for (let i = end; i < start; ++i) {\n            item.set(`${i / length * 100}%`, ...properties, text.substring(end, start + end - i));\n        }\n    }\n    item.setOptions(arguments[0]);\n\n    return item;\n}\n"],"names":["set","property","values","options","item","SceneItem","length","i","zoomIn","_a","_b","_c","from","_d","to","arguments","zoomOut","wipeIn","_e","wipeOut","transition","item1","item2","transitionObject","transitionItem","append","duration","getDuration","transitionTime","Math","max","setDirection","fadeIn","fadeOut","blink","flip","x","y","_f","backside","startValue","endValue","ratio","startDeg","endDeg","axis","join","transform","flipX","setOptions","flipY","shake","properties","frequency","frame","Frame","names","getNames","forEach","propertyNames","value","get","start","end","unit","isArray","startNumber","startUnit","splitUnit","valueNumber","valueUnit","abs","j","random","shakeX","translateX","shakeY","translateY","typing","text","concat","substring"],"mappings":"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"}