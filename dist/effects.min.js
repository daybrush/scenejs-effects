/*
Copyright (c) Daybrush
name: @scenejs/effects
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/scenejs-effects.git
version: 1.0.2
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("scenejs")):"function"==typeof define&&define.amd?define(["exports","scenejs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Scene=e.Scene||{},e.Scene)}(this,(function(e,t){"use strict";function r(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var n="string",o=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];function i(e,t,r,n,o){return a(e,t,r)?r:function(e,t,r,n,o){for(var c,u=function(r){var u=t[r].trim();if(u===e.close&&!a(e,t,r))return{value:r};var f=r,v=s(o,(function(e){return e.open===u}));if(v&&(f=i(v,t,r,n,o)),-1===f)return c=r,"break";c=r=f},f=r;f<n;++f){var v=u(f);if(f=c,"object"==typeof v)return v.value;if("break"===v)break}return-1}(e,t,r+1,n,o)}function a(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function c(e,t){var r=typeof t===n?{separator:t}:t,u=r.separator,f=void 0===u?",":u,v=r.isSeparateFirst,p=r.isSeparateOnlyOpenClose,l=r.isSeparateOpenClose,d=void 0===l?p:l,y=r.openCloseCharacters,m=void 0===y?o:y,g=m.map((function(e){var t=e.open,r=e.close;return t===r?t:t+"|"+r})).join("|"),h=new RegExp("(\\s*"+f+"\\s*|"+g+"|\\s+)","g"),x=e.split(h).filter((function(e){return e&&"undefined"!==e})),S=x.length,b=[],k=[];function E(){return!!k.length&&(b.push(k.join("")),k=[],!0)}for(var R,O=function(t){var r=x[t].trim(),n=t,o=s(m,(function(e){return e.open===r})),u=s(m,(function(e){return e.close===r}));if(o){if(-1!==(n=i(o,x,t,S,m))&&d)return E()&&v?(R=t,"break"):(b.push(x.slice(t,n+1).join("")),t=n,v?(R=t,"break"):(R=t,"continue"))}else{if(u&&!a(u,x,t)){var l=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n}(m);return l.splice(m.indexOf(u),1),{value:c(e,{separator:f,isSeparateFirst:v,isSeparateOnlyOpenClose:p,isSeparateOpenClose:d,openCloseCharacters:l})}}if(function(e,t){return(""===t||" "==t)&&(""===e||" "==e)||e===t}(r,f)&&!p)return E(),v?(R=t,"break"):(R=t,"continue")}-1===n&&(n=S-1),k.push(x.slice(t,n+1).join("")),R=t=n},j=0;j<S;++j){var C=O(j);if(j=R,"object"==typeof C)return C.value;if("break"===C)break}return k.length&&b.push(k.join("")),b}function u(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2];return{prefix:r,unit:t[3],value:parseFloat(n)}}function f(e){return[].slice.call(e)}function s(e,t,r){var n=function(e,t,r){void 0===r&&(r=-1);for(var n=e.length,o=0;o<n;++o)if(t(e[o],o,e))return o;return r}(e,t);return n>-1?e[n]:r}var v="undefined"!=typeof CSSRule,p=v?CSSRule.KEYFRAMES_RULE||CSSRule.WEBKIT_KEYFRAMES_RULE:7,l=v?CSSRule.KEYFRAME_RULE||CSSRule.WEBKIT_KEYFRAME_RULE:8;function d(e){for(var t=f(document.styleSheets).filter((function(e){try{return e.cssRules.length>0}catch(e){return!1}})),r=t.length,n=function(r){var n=f(t[r].cssRules).filter((function(t){return t.name===e&&t.type===p}))[0];if(n){var o=f(n.cssRules),i={};return o.forEach((function(e){if(e.type===l){var t=e.keyText,r=e.style.cssText;(n=t,c(n,",")).forEach((function(e){i[e]=r}))}var n})),{value:i}}},o=0;o<r;++o){var i=n(o);if("object"==typeof i)return i.value}return{}}function y(e,r,n){for(var o=new t.SceneItem({},n),i=r.length,a=0;a<i;++a)o.set("".concat(a/(i-1)*100,"%"),e,r[a]);return o}function m(e){var r,n=void 0===e?{}:e,o=n.x,i=void 0===o?1:o,a=n.y,c=void 0===a?1:a,u=n.backside,f=void 0!==u&&u,s=new t.SceneItem({},arguments[0]),v="",p="",l="",d=i&&c||i?i:c,y=f?d>0?180:-180:0,m=y+180*d;if(i&&c){var g=[i>0?1:-1,c>0?1:-1,0,""].join(",");v="rotate3d",p=g+y+"deg",l=g+m+"deg"}else{if(i)v="rotateX";else{if(!c)return s;v="rotateY"}p=y+"deg",l=m+"deg"}return s.set({transform:(r={},r[v]=[p,l],r)}),s}function g(e){var n=void 0===e?{}:e,o=n.properties,i=void 0===o?{transform:{translateX:["-10px","10px"],translateY:["-10px","10px"],rotate:["-10deg","10deg"]}}:o,a=n.frequency,c=void 0===a?10:a,f=new t.SceneItem({},arguments[0]),s=new t.Frame(i);return s.getNames().forEach((function(e,t){var n=s.get.apply(s,e),o=0,i=0,a="";if(function(e){return Array.isArray(e)}(n)){var v=u(n[0]),p=v.value;a=v.unit,o=p,i=u(n[1]).value}else{var l=u(n),d=l.value;a=l.unit,o=-(i=Math.abs(d))}f.set.apply(f,r(r(["0%"],e,!1),["".concat((o+i)/2).concat(a)],!1)),f.set.apply(f,r(r(["100%"],e,!1),["".concat((o+i)/2).concat(a)],!1));for(var y=1;y<=c;++y){var m=Math.random()*(i-o)+o;f.set.apply(f,r(r(["".concat(y/(c+1)*100,"%")],e,!1),["".concat(m).concat(a)],!1))}})),f}e.blink=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to;return y("opacity",[n,void 0===o?1:o,n],arguments[0])},e.fadeIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to;return y("opacity",[n,void 0===o?1:o],arguments[0])},e.fadeOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?1:r,o=t.to;return y("opacity",[n,void 0===o?0:o],arguments[0])},e.flip=m,e.flipX=function(e){var t=void 0===e?{}:e,r=t.x,n=void 0===r?1:r,o=t.backside,i=m({y:0,x:n,backside:void 0!==o&&o});return i.setOptions(arguments[0]),i},e.flipY=function(e){var t=void 0===e?{}:e,r=t.y,n=void 0===r?1:r,o=t.backside,i=m({x:0,y:n,backside:void 0!==o&&o});return i.setOptions(arguments[0]),i},e.keyframer=function(e,r){return new t.SceneItem(d(e),r)},e.kineticFrame=function(e){var n=void 0===e?{}:e,o=n.leftProperty,i=void 0===o?["transform","translateX"]:o,a=n.topProperty,c=void 0===a?["transform","translateY"]:a,u=n.left,f=void 0===u?"0px":u,s=n.top,v=void 0===s?"0px":s,p=new t.Frame;return p.set.apply(p,r(r([],[].concat(i),!1),[f],!1)),p.set.apply(p,r(r([],[].concat(c),!1),[v],!1)),p.set("transform-origin","calc(50% - ".concat(f,") calc(50% - ").concat(v,")")),p},e.shake=g,e.shakeX=function(e){var t=void 0===e?{}:e,r=t.x,n=void 0===r?["-5px","5px"]:r,o=t.frequency,i=g({properties:{transform:{translateX:n}},frequency:void 0===o?10:o});return i.setOptions(arguments[0]),i},e.shakeY=function(e){var t=void 0===e?{}:e,r=t.y,n=void 0===r?["-5px","5px"]:r,o=t.frequency,i=g({properties:{transform:{translateY:n}},frequency:void 0===o?10:o});return i.setOptions(arguments[0]),i},e.transition=function(e,r,n){var o,i=new t.SceneItem;i.append(n);var a=i.getDuration(),c=Math.max(e.getDuration()-a,0);e.set(((o={})[c]=i,o)),i.setDirection("reverse"),r.set({0:i})},e.typing=function(e){var n=void 0===e?{}:e,o=n.property,i=void 0===o?["html"]:o,a=n.text,c=void 0===a?"":a,u=n.start,f=void 0===u?0:u,s=n.end,v=void 0===s?c.length:s,p=n.prefix,l=void 0===p?"":p,d=n.suffix,y=void 0===d?"":d,m=[].concat(i),g=new t.SceneItem,h=Math.abs(v-f)+1;if(f<v)for(var x=f;x<=v;++x)g.set.apply(g,r(r(["".concat((x-f)/h*100,"%")],m,!1),["".concat(l).concat(c.substring(f,x)).concat(y)],!1));else for(x=v;x<=f;++x)g.set.apply(g,r(r(["".concat((x-v)/h*100,"%")],m,!1),["".concat(l,"text.substring(end, start + end - i)").concat(y)],!1));return g.setOptions(arguments[0]),g},e.wipeIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?"-100%":r,o=t.to,i=void 0===o?"0%":o,a=t.property;return y(void 0===a?"left":a,[n,i],arguments[0])},e.wipeOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?"0%":r,o=t.to,i=void 0===o?"100%":o,a=t.property;return y(void 0===a?"left":a,[n,i],arguments[0])},e.zoomIn=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?0:r,o=t.to;return y(["transform","scale"],[n,void 0===o?1:o],arguments[0])},e.zoomOut=function(e){var t=void 0===e?{}:e,r=t.from,n=void 0===r?1:r,o=t.to;return y(["transform","scale"],[n,void 0===o?0:o],arguments[0])}}));
//# sourceMappingURL=effects.min.js.map
